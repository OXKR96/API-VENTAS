{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{Row,Col,Card,Form,Button,InputGroup,Modal}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCalculator,faDollarSign,faCalendarAlt,faCheck,faCircleCheck}from'@fortawesome/free-solid-svg-icons';import Layout from'../components/layout/Layout';import{simularCredito,validarCliente,crearCredito}from'../services/apiService';import{OfflineContext}from'../context/OfflineContext';import{AuthContext}from'../context/AuthContext';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SimuladorPage=()=>{// Estado para simulación\nconst[monto,setMonto]=useState(0);const[plazo,setPlazo]=useState(0);const[simulacion,setSimulacion]=useState(null);const[loading,setLoading]=useState(false);// Estado para validación de cliente\nconst[showValidacion,setShowValidacion]=useState(false);const[cedula,setCedula]=useState('');const[telefono,setTelefono]=useState('');// Estado para verificación\nconst[verificacionIniciada,setVerificacionIniciada]=useState(false);const[verificacionCompletada,setVerificacionCompletada]=useState(false);// Estado para datos del cliente\nconst[datosCliente,setDatosCliente]=useState({nombre:'',apellido:'',email:'',direccion:''});// Estado para la solicitud de crédito\nconst[showSolicitud,setShowSolicitud]=useState(false);// Contextos\nconst{offline}=useContext(OfflineContext);const{user}=useContext(AuthContext);// Calcular simulación\nconst calcularSimulacion=(montoCalcular,plazoCalcular)=>{const montoNumerico=parseInt(montoCalcular);// Aplicar cálculos según el plazo\nlet tasaInteres;let porcentajeFGA;switch(plazoCalcular){case 3:tasaInteres=1.93;porcentajeFGA=13.00;break;case 6:tasaInteres=2.5;porcentajeFGA=10.00;break;case 9:tasaInteres=2.7;porcentajeFGA=9.00;break;case 12:tasaInteres=2.9;porcentajeFGA=8.50;break;default:tasaInteres=2.5;porcentajeFGA=10.00;}// Cálculos financieros\nconst interesesTotales=montoNumerico*(tasaInteres/100)*plazoCalcular;const seguroVida=Math.round(montoNumerico*0.005);// 0.5% del monto\nconst totalFGA=Math.round(montoNumerico*(porcentajeFGA/100));// Cálculo de la cuota mensual (incluyendo seguro de vida)\nconst valorCuota=Math.round((montoNumerico+interesesTotales+totalFGA)/plazoCalcular);const totalPagar=montoNumerico+interesesTotales+totalFGA;return{valorVenta:montoNumerico,valorCuota:valorCuota,cuotaInicial:0,numeroCuotas:plazoCalcular,frecuenciaPago:'Mensual',tasaInteres:tasaInteres,interesesTotales:interesesTotales,porcentajeFGA:porcentajeFGA,totalFGA:totalFGA,totalPagar:totalPagar,seguroVida:seguroVida};};// Simular crédito\nconst handleSimular=()=>{if(!monto){toast.error('Por favor ingrese un monto');return;}setLoading(true);try{// Calcular la simulación\nconst resultado=calcularSimulacion(monto,plazo);setSimulacion(resultado);}catch(error){console.error('Error al simular:',error);toast.error('Ocurrió un error al simular el crédito');}finally{setLoading(false);}};// Efecto para simular inicialmente\nuseEffect(()=>{handleSimular();},[]);// Efecto para recalcular cuando cambia el plazo o monto\nuseEffect(()=>{handleSimular();},[plazo,monto]);// Abrir modal de validación\nconst handleSolicitar=()=>{setShowValidacion(true);setVerificacionIniciada(false);setVerificacionCompletada(false);setCedula('');setTelefono('');};// Validar cliente\nconst handleValidarCliente=()=>{if(!cedula||!telefono){toast.error('Por favor complete todos los campos');return;}setVerificacionIniciada(true);// El proceso de verificación lo manejará Metamap\n};// Configurar Metamap\nuseEffect(()=>{// Cargar script de Metamap\nconst script=document.createElement('script');script.src=\"https://web-button.metamap.com/button.js\";script.async=true;document.body.appendChild(script);return()=>{// Limpiar script al desmontar\nif(document.body.contains(script)){document.body.removeChild(script);}};},[]);// Configurar eventos de Metamap cuando se muestra el modal\nuseEffect(()=>{if(!showValidacion)return;// Buscar el botón de Metamap después de que el modal se muestre\nconst checkForMetamapButton=setInterval(()=>{const metamapButton=document.querySelector('metamap-button');if(metamapButton){clearInterval(checkForMetamapButton);// Evento cuando inicia la verificación\nmetamapButton.addEventListener('metamap:userStartedSdk',event=>{console.log('Verificación iniciada:',event.detail);});// Evento cuando completa la verificación\nmetamapButton.addEventListener('metamap:userFinishedSdk',event=>{console.log('Verificación completada:',event.detail);// Marcar como completada\nsetVerificacionCompletada(true);// Obtener datos del cliente (simulado)\nsetDatosCliente({nombre:\"Oscar David\",apellido:\"Madrigal Fonnegra\",email:\"Oxkr96@gmail.com\",direccion:\"Calle Principal 123, Medellín\"});toast.success('Verificación completada exitosamente');});// Evento cuando sale de la verificación\nmetamapButton.addEventListener('metamap:exitedSdk',event=>{console.log('Usuario salió de la verificación:',event.detail);});}},500);return()=>{clearInterval(checkForMetamapButton);};},[showValidacion]);// Continuar después de la validación\nconst handleContinuar=()=>{if(verificacionCompletada){setShowValidacion(false);setShowSolicitud(true);}else{toast.error('Debe completar la verificación primero');}};// Aprobar crédito\nconst handleAprobarCredito=async()=>{setLoading(true);try{// Aquí harías la llamada a tu API para crear el crédito\n// await crearCredito({...datosCliente, monto, plazo});\ntoast.success('Crédito aprobado exitosamente');setShowSolicitud(false);// Limpiar formulario\nsetMonto('200000');setPlazo(3);setCedula('');setTelefono('');setVerificacionCompletada(false);setVerificacionIniciada(false);setDatosCliente({nombre:'',apellido:'',email:'',direccion:''});}catch(error){console.error('Error al aprobar crédito:',error);toast.error('Ocurrió un error al aprobar el crédito');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Simulador\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Simulador\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Monto a financiar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:monto,onChange:e=>setMonto(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Plazo (en cuotas)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:`btn btn-${plazo===3?'primary':'outline-secondary'} flex-fill`,onClick:()=>setPlazo(3),children:\"3\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:`btn btn-${plazo===6?'primary':'outline-secondary'} flex-fill`,onClick:()=>setPlazo(6),children:\"6\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:`btn btn-${plazo===9?'primary':'outline-secondary'} flex-fill`,onClick:()=>setPlazo(9),children:\"9\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-primary w-100 mt-3\",onClick:handleSimular,disabled:loading,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCalculator,className:\"me-2\"}),\"Calcular\"]}),simulacion&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Valor de cuota:\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-primary\",children:[\"$ \",simulacion.valorCuota.toLocaleString()]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success w-100 mt-3\",onClick:handleSolicitar,children:\"Solicitar\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Detalle de la simulaci\\xF3n\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[simulacion&&/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-borderless\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Valor de la venta\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",parseInt(monto).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Valor de la cuota\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",simulacion.valorCuota.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Cuota inicial\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",simulacion.cuotaInicial.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"N. cuotas\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:simulacion.numeroCuotas})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Frecuencia de pago\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:simulacion.frecuenciaPago})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Tasa de inter\\xE9s\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[simulacion.tasaInteres,\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Total de intereses\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",Math.round(simulacion.interesesTotales).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Porcentaje FGA\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[simulacion.porcentajeFGA.toFixed(2),\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Total de FGA\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",simulacion.totalFGA.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"table-active\",children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total a pagar\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$ \",Math.round(simulacion.totalPagar).toLocaleString()]})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-info mt-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Informaci\\xF3n importante\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Esta simulaci\\xF3n es solo informativa y los valores pueden variar seg\\xFAn la evaluaci\\xF3n del cliente. El porcentaje FGA depende de la calificaci\\xF3n que arroje las pol\\xEDticas internas y datacredito. Ejemplo: excelente h\\xE1bito de pago FGA 8% + IVA.\"})]})]})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:showValidacion,onHide:()=>setShowValidacion(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Validaci\\xF3n de Cliente\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"N\\xFAmero de C\\xE9dula\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:cedula,onChange:e=>setCedula(e.target.value),placeholder:\"Ingrese n\\xFAmero de c\\xE9dula\",disabled:verificacionIniciada})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:telefono,onChange:e=>setTelefono(e.target.value),placeholder:\"Ingrese n\\xFAmero de tel\\xE9fono\",disabled:verificacionIniciada})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"verificacion-container\",className:\"text-center mt-4\",children:[!verificacionIniciada?/*#__PURE__*/_jsx(\"p\",{children:\"Para continuar con la solicitud, se requiere verificar su identidad.\"}):verificacionCompletada?/*#__PURE__*/_jsxs(\"p\",{className:\"text-success\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCircleCheck,className:\"me-2\"}),\"Verificaci\\xF3n completada exitosamente\"]}):/*#__PURE__*/_jsx(\"p\",{children:\"Por favor complete el proceso de verificaci\\xF3n.\"}),verificacionIniciada&&!verificacionCompletada&&/*#__PURE__*/_jsx(\"metamap-button\",{clientid:\"67e844f12f057303ed9e7b54\",flowid:\"67e844f155e2997603974699\",metadata:JSON.stringify({cedula:cedula,telefono:telefono,source:\"simulador_creditos\"})})]})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:!verificacionIniciada?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowValidacion(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleValidarCliente,disabled:!cedula||!telefono,children:\"Verificarme\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowValidacion(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleContinuar,disabled:!verificacionCompletada,children:\"Continuar\"})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:showSolicitud,onHide:()=>setShowSolicitud(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Detalle del Cr\\xE9dito\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success mb-4\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCircleCheck,className:\"me-2\"}),\"Identidad verificada exitosamente\"]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Datos del Cliente:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"C\\xE9dula\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:cedula,readOnly:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:telefono,readOnly:true})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:datosCliente.nombre,readOnly:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Apellido\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:datosCliente.apellido,readOnly:true})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:datosCliente.email,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Direcci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:datosCliente.direccion,readOnly:true})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"mt-4\",children:\"Detalle del cr\\xE9dito:\"}),simulacion&&/*#__PURE__*/_jsx(\"table\",{className:\"table table-bordered mt-2\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Valor de la venta\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",parseInt(monto).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Valor de la cuota\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",simulacion.valorCuota.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Cuota inicial\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",simulacion.cuotaInicial.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"N. cuotas\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:simulacion.numeroCuotas})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Frecuencia de pago\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:simulacion.frecuenciaPago})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Tasa de inter\\xE9s\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[simulacion.tasaInteres,\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Total de intereses\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",Math.round(simulacion.interesesTotales).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Porcentaje FGA\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[simulacion.porcentajeFGA.toFixed(2),\"%\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Total de FGA\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"$ \",simulacion.totalFGA.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"table-active\",children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total a pagar\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$ \",Math.round(simulacion.totalPagar).toLocaleString()]})})]})]})})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowSolicitud(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleAprobarCredito,disabled:loading,children:\"Continuar\"})]})]})]});};export default SimuladorPage;","map":{"version":3,"names":["React","useState","useEffect","useContext","Row","Col","Card","Form","Button","InputGroup","Modal","FontAwesomeIcon","faCalculator","faDollarSign","faCalendarAlt","faCheck","faCircleCheck","Layout","simularCredito","validarCliente","crearCredito","OfflineContext","AuthContext","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SimuladorPage","monto","setMonto","plazo","setPlazo","simulacion","setSimulacion","loading","setLoading","showValidacion","setShowValidacion","cedula","setCedula","telefono","setTelefono","verificacionIniciada","setVerificacionIniciada","verificacionCompletada","setVerificacionCompletada","datosCliente","setDatosCliente","nombre","apellido","email","direccion","showSolicitud","setShowSolicitud","offline","user","calcularSimulacion","montoCalcular","plazoCalcular","montoNumerico","parseInt","tasaInteres","porcentajeFGA","interesesTotales","seguroVida","Math","round","totalFGA","valorCuota","totalPagar","valorVenta","cuotaInicial","numeroCuotas","frecuenciaPago","handleSimular","error","resultado","console","handleSolicitar","handleValidarCliente","script","document","createElement","src","async","body","appendChild","contains","removeChild","checkForMetamapButton","setInterval","metamapButton","querySelector","clearInterval","addEventListener","event","log","detail","success","handleContinuar","handleAprobarCredito","children","className","type","value","onChange","e","target","onClick","disabled","icon","toLocaleString","toFixed","show","onHide","Header","closeButton","Title","Body","Group","Label","Control","placeholder","id","clientid","flowid","metadata","JSON","stringify","source","Footer","variant","size","readOnly"],"sources":["C:/Users/OXKR/Documents/2025/API-VENTAS/API-VENTAS/pos-frontend/src/pages/SimuladorPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { Row, Col, Card, Form, Button, InputGroup, Modal } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faCalculator,\r\n  faDollarSign,\r\n  faCalendarAlt,\r\n  faCheck,\r\n  faCircleCheck\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport Layout from '../components/layout/Layout';\r\nimport { simularCredito, validarCliente, crearCredito } from '../services/apiService';\r\nimport { OfflineContext } from '../context/OfflineContext';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst SimuladorPage = () => {\r\n  // Estado para simulación\r\n  const [monto, setMonto] = useState(0);\r\n  const [plazo, setPlazo] = useState(0);\r\n  const [simulacion, setSimulacion] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Estado para validación de cliente\r\n  const [showValidacion, setShowValidacion] = useState(false);\r\n  const [cedula, setCedula] = useState('');\r\n  const [telefono, setTelefono] = useState('');\r\n  \r\n  // Estado para verificación\r\n  const [verificacionIniciada, setVerificacionIniciada] = useState(false);\r\n  const [verificacionCompletada, setVerificacionCompletada] = useState(false);\r\n  \r\n  // Estado para datos del cliente\r\n  const [datosCliente, setDatosCliente] = useState({\r\n    nombre: '',\r\n    apellido: '',\r\n    email: '',\r\n    direccion: ''\r\n  });\r\n  \r\n  // Estado para la solicitud de crédito\r\n  const [showSolicitud, setShowSolicitud] = useState(false);\r\n  \r\n  // Contextos\r\n  const { offline } = useContext(OfflineContext);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  // Calcular simulación\r\n  const calcularSimulacion = (montoCalcular, plazoCalcular) => {\r\n    const montoNumerico = parseInt(montoCalcular);\r\n    \r\n    // Aplicar cálculos según el plazo\r\n    let tasaInteres;\r\n    let porcentajeFGA;\r\n    \r\n    switch (plazoCalcular) {\r\n      case 3:\r\n        tasaInteres = 1.93;\r\n        porcentajeFGA = 13.00;\r\n        break;\r\n      case 6:\r\n        tasaInteres = 2.5;\r\n        porcentajeFGA = 10.00;\r\n        break;\r\n      case 9:\r\n        tasaInteres = 2.7;\r\n        porcentajeFGA = 9.00;\r\n        break;\r\n      case 12:\r\n        tasaInteres = 2.9;\r\n        porcentajeFGA = 8.50;\r\n        break;\r\n      default:\r\n        tasaInteres = 2.5;\r\n        porcentajeFGA = 10.00;\r\n    }\r\n    \r\n    // Cálculos financieros\r\n    const interesesTotales = (montoNumerico * (tasaInteres / 100)) * plazoCalcular;\r\n    const seguroVida = Math.round(montoNumerico * 0.005); // 0.5% del monto\r\n    const totalFGA = Math.round(montoNumerico * (porcentajeFGA / 100));\r\n    \r\n    // Cálculo de la cuota mensual (incluyendo seguro de vida)\r\n    const valorCuota = Math.round((montoNumerico + interesesTotales + totalFGA) / plazoCalcular);\r\n    const totalPagar = montoNumerico + interesesTotales + totalFGA;\r\n    \r\n    return {\r\n      valorVenta: montoNumerico,\r\n      valorCuota: valorCuota,\r\n      cuotaInicial: 0,\r\n      numeroCuotas: plazoCalcular,\r\n      frecuenciaPago: 'Mensual',\r\n      tasaInteres: tasaInteres,\r\n      interesesTotales: interesesTotales,\r\n      porcentajeFGA: porcentajeFGA,\r\n      totalFGA: totalFGA,\r\n      totalPagar: totalPagar,\r\n      seguroVida: seguroVida\r\n    };\r\n  };\r\n\r\n  // Simular crédito\r\n  const handleSimular = () => {\r\n    if (!monto) {\r\n      toast.error('Por favor ingrese un monto');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Calcular la simulación\r\n      const resultado = calcularSimulacion(monto, plazo);\r\n      setSimulacion(resultado);\r\n    } catch (error) {\r\n      console.error('Error al simular:', error);\r\n      toast.error('Ocurrió un error al simular el crédito');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Efecto para simular inicialmente\r\n  useEffect(() => {\r\n    handleSimular();\r\n  }, []);\r\n  \r\n  // Efecto para recalcular cuando cambia el plazo o monto\r\n  useEffect(() => {\r\n    handleSimular();\r\n  }, [plazo, monto]);\r\n\r\n  // Abrir modal de validación\r\n  const handleSolicitar = () => {\r\n    setShowValidacion(true);\r\n    setVerificacionIniciada(false);\r\n    setVerificacionCompletada(false);\r\n    setCedula('');\r\n    setTelefono('');\r\n  };\r\n\r\n  // Validar cliente\r\n  const handleValidarCliente = () => {\r\n    if (!cedula || !telefono) {\r\n      toast.error('Por favor complete todos los campos');\r\n      return;\r\n    }\r\n    \r\n    setVerificacionIniciada(true);\r\n    // El proceso de verificación lo manejará Metamap\r\n  };\r\n  \r\n  // Configurar Metamap\r\n  useEffect(() => {\r\n    // Cargar script de Metamap\r\n    const script = document.createElement('script');\r\n    script.src = \"https://web-button.metamap.com/button.js\";\r\n    script.async = true;\r\n    document.body.appendChild(script);\r\n\r\n    return () => {\r\n      // Limpiar script al desmontar\r\n      if (document.body.contains(script)) {\r\n        document.body.removeChild(script);\r\n      }\r\n    };\r\n  }, []);\r\n  \r\n  // Configurar eventos de Metamap cuando se muestra el modal\r\n  useEffect(() => {\r\n    if (!showValidacion) return;\r\n    \r\n    // Buscar el botón de Metamap después de que el modal se muestre\r\n    const checkForMetamapButton = setInterval(() => {\r\n      const metamapButton = document.querySelector('metamap-button');\r\n      if (metamapButton) {\r\n        clearInterval(checkForMetamapButton);\r\n        \r\n        // Evento cuando inicia la verificación\r\n        metamapButton.addEventListener('metamap:userStartedSdk', (event) => {\r\n          console.log('Verificación iniciada:', event.detail);\r\n        });\r\n        \r\n        // Evento cuando completa la verificación\r\n        metamapButton.addEventListener('metamap:userFinishedSdk', (event) => {\r\n          console.log('Verificación completada:', event.detail);\r\n          \r\n          // Marcar como completada\r\n          setVerificacionCompletada(true);\r\n          \r\n          // Obtener datos del cliente (simulado)\r\n          setDatosCliente({\r\n            nombre: \"Oscar David\",\r\n            apellido: \"Madrigal Fonnegra\",\r\n            email: \"Oxkr96@gmail.com\",\r\n            direccion: \"Calle Principal 123, Medellín\"\r\n          });\r\n          \r\n          toast.success('Verificación completada exitosamente');\r\n        });\r\n        \r\n        // Evento cuando sale de la verificación\r\n        metamapButton.addEventListener('metamap:exitedSdk', (event) => {\r\n          console.log('Usuario salió de la verificación:', event.detail);\r\n        });\r\n      }\r\n    }, 500);\r\n    \r\n    return () => {\r\n      clearInterval(checkForMetamapButton);\r\n    };\r\n  }, [showValidacion]);\r\n  \r\n  // Continuar después de la validación\r\n  const handleContinuar = () => {\r\n    if (verificacionCompletada) {\r\n      setShowValidacion(false);\r\n      setShowSolicitud(true);\r\n    } else {\r\n      toast.error('Debe completar la verificación primero');\r\n    }\r\n  };\r\n  \r\n  // Aprobar crédito\r\n  const handleAprobarCredito = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Aquí harías la llamada a tu API para crear el crédito\r\n      // await crearCredito({...datosCliente, monto, plazo});\r\n      \r\n      toast.success('Crédito aprobado exitosamente');\r\n      setShowSolicitud(false);\r\n      \r\n      // Limpiar formulario\r\n      setMonto('200000');\r\n      setPlazo(3);\r\n      setCedula('');\r\n      setTelefono('');\r\n      setVerificacionCompletada(false);\r\n      setVerificacionIniciada(false);\r\n      setDatosCliente({\r\n        nombre: '',\r\n        apellido: '',\r\n        email: '',\r\n        direccion: ''\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al aprobar crédito:', error);\r\n      toast.error('Ocurrió un error al aprobar el crédito');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <h1 className=\"page-title\">Simulador</h1>\r\n      \r\n      <div className=\"row\">\r\n        <div className=\"col-md-6\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h3>Simulador</h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"form-group\">\r\n                <label>Monto a financiar</label>\r\n                <div className=\"input-group\">\r\n                  <span className=\"input-group-text\">$</span>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={monto}\r\n                    onChange={(e) => setMonto(e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group mt-3\">\r\n                <label>Plazo (en cuotas)</label>\r\n                <div className=\"d-flex gap-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`btn btn-${plazo === 3 ? 'primary' : 'outline-secondary'} flex-fill`}\r\n                    onClick={() => setPlazo(3)}\r\n                  >\r\n                    3\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`btn btn-${plazo === 6 ? 'primary' : 'outline-secondary'} flex-fill`}\r\n                    onClick={() => setPlazo(6)}\r\n                  >\r\n                    6\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`btn btn-${plazo === 9 ? 'primary' : 'outline-secondary'} flex-fill`}\r\n                    onClick={() => setPlazo(9)}\r\n                  >\r\n                    9\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary w-100 mt-3\"\r\n                onClick={handleSimular}\r\n                disabled={loading}\r\n              >\r\n                <FontAwesomeIcon icon={faCalculator} className=\"me-2\" />\r\n                Calcular\r\n              </button>\r\n              \r\n              {simulacion && (\r\n                <div className=\"text-center mt-4\">\r\n                  <h4>Valor de cuota:</h4>\r\n                  <h2 className=\"text-primary\">$ {simulacion.valorCuota.toLocaleString()}</h2>\r\n                </div>\r\n              )}\r\n              \r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-success w-100 mt-3\"\r\n                onClick={handleSolicitar}\r\n              >\r\n                Solicitar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"col-md-6\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h3>Detalle de la simulación</h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {simulacion && (\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-borderless\">\r\n                    <tbody>\r\n                      <tr>\r\n                        <td>Valor de la venta</td>\r\n                        <td className=\"text-end\">$ {parseInt(monto).toLocaleString()}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Valor de la cuota</td>\r\n                        <td className=\"text-end\">$ {simulacion.valorCuota.toLocaleString()}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Cuota inicial</td>\r\n                        <td className=\"text-end\">$ {simulacion.cuotaInicial.toLocaleString()}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>N. cuotas</td>\r\n                        <td className=\"text-end\">{simulacion.numeroCuotas}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Frecuencia de pago</td>\r\n                        <td className=\"text-end\">{simulacion.frecuenciaPago}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Tasa de interés</td>\r\n                        <td className=\"text-end\">{simulacion.tasaInteres}%</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Total de intereses</td>\r\n                        <td className=\"text-end\">$ {Math.round(simulacion.interesesTotales).toLocaleString()}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Porcentaje FGA</td>\r\n                        <td className=\"text-end\">{simulacion.porcentajeFGA.toFixed(2)}%</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Total de FGA</td>\r\n                        <td className=\"text-end\">$ {simulacion.totalFGA.toLocaleString()}</td>\r\n                      </tr>\r\n                      <tr className=\"table-active\">\r\n                        <td><strong>Total a pagar</strong></td>\r\n                        <td className=\"text-end\"><strong>$ {Math.round(simulacion.totalPagar).toLocaleString()}</strong></td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"alert alert-info mt-3\">\r\n                <strong>Información importante</strong>\r\n                <p className=\"mb-0\">Esta simulación es solo informativa y los valores pueden variar según la evaluación del cliente. El porcentaje FGA depende de la calificación que arroje las políticas internas y datacredito. Ejemplo: excelente hábito de pago FGA 8% + IVA.</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal de Validación de Cliente */}\r\n      <Modal show={showValidacion} onHide={() => setShowValidacion(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Validación de Cliente</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Número de Cédula</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                value={cedula}\r\n                onChange={(e) => setCedula(e.target.value)}\r\n                placeholder=\"Ingrese número de cédula\"\r\n                disabled={verificacionIniciada}\r\n              />\r\n            </Form.Group>\r\n            \r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Teléfono</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                value={telefono}\r\n                onChange={(e) => setTelefono(e.target.value)}\r\n                placeholder=\"Ingrese número de teléfono\"\r\n                disabled={verificacionIniciada}\r\n              />\r\n            </Form.Group>\r\n            \r\n            <div id=\"verificacion-container\" className=\"text-center mt-4\">\r\n              {!verificacionIniciada ? (\r\n                <p>Para continuar con la solicitud, se requiere verificar su identidad.</p>\r\n              ) : verificacionCompletada ? (\r\n                <p className=\"text-success\">\r\n                  <FontAwesomeIcon icon={faCircleCheck} className=\"me-2\" />\r\n                  Verificación completada exitosamente\r\n                </p>\r\n              ) : (\r\n                <p>Por favor complete el proceso de verificación.</p>\r\n              )}\r\n              \r\n              {verificacionIniciada && !verificacionCompletada && (\r\n                <metamap-button\r\n                  clientid=\"67e844f12f057303ed9e7b54\"\r\n                  flowid=\"67e844f155e2997603974699\"\r\n                  metadata={JSON.stringify({\r\n                    cedula: cedula,\r\n                    telefono: telefono,\r\n                    source: \"simulador_creditos\"\r\n                  })}\r\n                ></metamap-button>\r\n              )}\r\n            </div>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          {!verificacionIniciada ? (\r\n            <>\r\n              <Button variant=\"secondary\" onClick={() => setShowValidacion(false)}>\r\n                Cancelar\r\n              </Button>\r\n              <Button \r\n                variant=\"primary\" \r\n                onClick={handleValidarCliente}\r\n                disabled={!cedula || !telefono}\r\n              >\r\n                Verificarme\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Button variant=\"secondary\" onClick={() => setShowValidacion(false)}>\r\n                Cancelar\r\n              </Button>\r\n              <Button \r\n                variant=\"primary\" \r\n                onClick={handleContinuar}\r\n                disabled={!verificacionCompletada}\r\n              >\r\n                Continuar\r\n              </Button>\r\n            </>\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Modal de Detalle del Crédito */}\r\n      <Modal show={showSolicitud} onHide={() => setShowSolicitud(false)} size=\"lg\">\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Detalle del Crédito</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"alert alert-success mb-4\">\r\n            <FontAwesomeIcon icon={faCircleCheck} className=\"me-2\" />\r\n            Identidad verificada exitosamente\r\n          </div>\r\n          \r\n          <h5>Datos del Cliente:</h5>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <div className=\"form-group mb-3\">\r\n                <label>Cédula</label>\r\n                <input \r\n                  type=\"text\" \r\n                  className=\"form-control\"\r\n                  value={cedula} \r\n                  readOnly \r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <div className=\"form-group mb-3\">\r\n                <label>Teléfono</label>\r\n                <input \r\n                  type=\"text\" \r\n                  className=\"form-control\"\r\n                  value={telefono} \r\n                  readOnly \r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <div className=\"form-group mb-3\">\r\n                <label>Nombre</label>\r\n                <input \r\n                  type=\"text\" \r\n                  className=\"form-control\"\r\n                  value={datosCliente.nombre} \r\n                  readOnly \r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <div className=\"form-group mb-3\">\r\n                <label>Apellido</label>\r\n                <input \r\n                  type=\"text\" \r\n                  className=\"form-control\"\r\n                  value={datosCliente.apellido} \r\n                  readOnly \r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"form-group mb-3\">\r\n            <label>Email</label>\r\n            <input \r\n              type=\"text\" \r\n              className=\"form-control\"\r\n              value={datosCliente.email} \r\n              readOnly \r\n            />\r\n          </div>\r\n          \r\n          <div className=\"form-group mb-3\">\r\n            <label>Dirección</label>\r\n            <input \r\n              type=\"text\" \r\n              className=\"form-control\"\r\n              value={datosCliente.direccion} \r\n              readOnly \r\n            />\r\n          </div>\r\n          \r\n          <h5 className=\"mt-4\">Detalle del crédito:</h5>\r\n          {simulacion && (\r\n            <table className=\"table table-bordered mt-2\">\r\n              <tbody>\r\n                <tr>\r\n                  <td>Valor de la venta</td>\r\n                  <td className=\"text-end\">$ {parseInt(monto).toLocaleString()}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Valor de la cuota</td>\r\n                  <td className=\"text-end\">$ {simulacion.valorCuota.toLocaleString()}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Cuota inicial</td>\r\n                  <td className=\"text-end\">$ {simulacion.cuotaInicial.toLocaleString()}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>N. cuotas</td>\r\n                  <td className=\"text-end\">{simulacion.numeroCuotas}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Frecuencia de pago</td>\r\n                  <td className=\"text-end\">{simulacion.frecuenciaPago}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Tasa de interés</td>\r\n                  <td className=\"text-end\">{simulacion.tasaInteres}%</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Total de intereses</td>\r\n                  <td className=\"text-end\">$ {Math.round(simulacion.interesesTotales).toLocaleString()}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Porcentaje FGA</td>\r\n                  <td className=\"text-end\">{simulacion.porcentajeFGA.toFixed(2)}%</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Total de FGA</td>\r\n                  <td className=\"text-end\">$ {simulacion.totalFGA.toLocaleString()}</td>\r\n                </tr>\r\n                <tr className=\"table-active\">\r\n                  <td><strong>Total a pagar</strong></td>\r\n                  <td className=\"text-end\"><strong>$ {Math.round(simulacion.totalPagar).toLocaleString()}</strong></td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowSolicitud(false)}>\r\n            Cancelar\r\n          </Button>\r\n          <Button \r\n            variant=\"primary\" \r\n            onClick={handleAprobarCredito}\r\n            disabled={loading}\r\n          >\r\n            Continuar\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default SimuladorPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}